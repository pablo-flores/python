
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alarmas del Outage Manager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <!-- Archivos CSS locales -->
    <link rel="stylesheet" href="{{ url_for('static', filename='vendor/css/jquery.dataTables.min.css') }}">
    <!-- Archivos JavaScript locales -->
    <script src="{{ url_for('static', filename='vendor/js/jquery-3.6.0.min.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/js/jquery.dataTables.min.js') }}"></script>
    <script defer src="{{ url_for('static', filename='viewAlarmsOUM.js') }}"></script>
</head>


<body>

    <div id="loading">
        <img src="static/1.gif" alt="Cargando..." style="width:100px; height:100px;">
        <p>Cargando datos de Alarmas del Outage Manager de los últimos {{ days_configMap }} días, por favor espere...</p>
    </div>
    

    <!-- Barra "Service Impact Analysis" con imagen -->
    <nav class="banner"> 
        <div class="service-impact-analysis">
            <img src="{{ url_for('static', filename='telecom.gif') }}" alt="Telecom Logo" class="logo">
            Service Impact Analysis
            <div class="refresh-container">
                <a href="javascript:(window.location.href = window.location.href)" class="btn-modern">Refresh - Foto: <span id="local-time"></span></a>        
            </div>
        </div>
    </nav>
    
    <div style="position: relative; top: -12px;">
        <label id="toggleClick" for="toggle" style="font-size: 0.9vw;">Click para Explicación de columnas</label>
        <input type="checkbox" id="toggle">
        <div id="expandableDiv" style="font-size: 1.1vw;">
            <h2>Alarmas en el Outage Manager</h2>
            <p><strong>Alarm Id:</strong>  Id del Outage (o Alarma), interno del Outage Manager (OUM).<br>
            <strong>Other Id:</strong>  Id de la ticketera o de Fault.<br>            
            <strong>Alarm State:</strong> Estado actual de la alarma (en outage y cadena).<br>
            <strong>Alarm Raised Time:</strong> Fecha y hora que Fault detecto 1er evento de la alarma.<br>
            <strong>Alarm Cleared Time:</strong> Fecha y hora que Fault desafecto la alarma, muestra los últimos {{ days_configMap }} días.<br>       
            <strong>Alarm Type:</strong> Tipo de alarma (INDISPONIBILIDAD, DEGRADACION y TAREA_PROGRAM...).<br>
            <strong>Inicio Outage:</strong> Fecha y hora que llego la afectacion al Outage Manager.<br>       
            <strong>Type Network Element:</strong> Tipo de elemento de red asociado (RFS: Resource Facing Service, conjunto de recursos asociados a un nombre, para facilitar su modelado/gestion).<br>
            <strong>Network Element ID:</strong> Nombre del elemento de red donde aplico el outage. <br>
            <strong>Clients:</strong> Cantidad de clientes afectados (clientes únicos). <br>
            <strong>Time Resolution:</strong> Tiempo estimado de resolución (s/tablas).</p>
        </div>
    </div>

    
    <div class="page-content" style="position: relative; top: -10px;">
        <!-- <h1>Alarmas Activas en el Outage Manager</h1>-->
        <!-- <h2>Alarmas en el Outage Manager</h2>
        <h1>Alarmas Activas en el Outage Manager</h1>
        <h2>Alarmas en el Outage Manager</h2>-->

        <table id="alarmTable" style="display:none; margin: 0 3px; width: calc(100% - 6px);">
            <thead>
                <tr>
                    <th style="font-size: 0.7vw;">Alarm Id<span class="tooltip-text">Alarm Id: Id del Outage (o Alarma), interno del Outage Manager (OUM).</span></th>
                    <th style="font-size: 0.7vw;">Other Id<span class="tooltip-text">Other Id: Id de la ticketera o de Fault.</span></th>                    
                    <th style="font-size: 0.7vw;">Alarm State<span class="tooltip-text">Alarm State: Estado actual de la alarma (en outage y cadena).</span></th>                                                            
                    <th style="font-size: 0.7vw; text-align: center; width: 1%;">Raised Time<span class="tooltip-text">Raised Time: Fecha y hora que Fault detectó el primer evento de la alarma.</span></th>                                        
                    <th style="font-size: 0.7vw; text-align: center; width: 1%;">Cleared Time<span class="tooltip-text">Cleared Time: Fecha y hora que Fault desafectó la alarma, muestra los últimos {{ days_configMap }} días.</span></th>                                                                                
                    <th style="font-size: 0.7vw;">Alarm Type<span class="tooltip-text">Alarm Type: Tipo de alarma (INDISPONIBILIDAD, DEGRADACION, TAREA_PROGRAMADA, etc.).</span></th>                    
                    <th style="font-size: 0.7vw; text-align: center; width: 1%;">Inic Outage<span class="tooltip-text">Inic Outage: Fecha y hora que llegó la afectación al Outage Manager.</span></th>                                        
                    <th style="font-size: 0.7vw;">Type Network Element<span class="tooltip-text">Type Network Element: Tipo de elemento de red asociado.</span></th>                    
                    <th style="font-size: 0.7vw;">Network Element ID<span class="tooltip-text">Network Element ID: Nombre del elemento de red donde aplicó el outage.</span></th>                                        
                    <th style="font-size: 0.7vw;">Clients<span class="tooltip-text">Clients: Cantidad de clientes afectados (clientes únicos).</span></th>                    
                    <th style="font-size: 0.7vw;">hs.Res.<span class="tooltip-text">hs.Res.: Tiempo estimado de resolución.</span></th>                    
                </tr>       
            </thead>
            <tbody>
                {% for alarma in alarmas %}
                
                <tr>
                    <td>{{ alarma.alarmId }}</td>
                    <td>{{ alarma.origenId }}</td>                                        
                    <td>{{ alarma.alarmState }}</td>                    
                    <td style="text-align: center; padding: 2px 2px; width: 1%; ">{{ alarma.alarmRaisedTime }}</td> <!-- Centrar contenido del TD -->                             
                    <td style="text-align: center; padding: 2px 2px; width: 1%; ">{{ alarma.alarmClearedTime }}</td> <!-- Centrar contenido del TD -->                             
                    <td>{{ alarma.alarmType }}</td>
                    <td style="text-align: center; padding: 2px 2px; width: 1%; ">{{ alarma.inicioOUM }}</td> <!-- Centrar contenido del TD -->                                                  
                    <td>{{ alarma.TypeNetworkElement }}</td>                
                    <td>{{ alarma.networkElementId }}</td>
                    <td style="text-align: center; padding: 2px 2px; width: 1%; ">{{ alarma.clients }}</td> <!-- Centrar contenido del TD -->                                                                      
                    <td style="text-align: center; padding: 2px 2px; width: 1%; ">{{ alarma.timeResolution }}</td> <!-- Centrar contenido del TD -->                                                  
                </tr>
                {% else %}
                <tr>
                    <td colspan="9">No hay alarmas disponibles</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>    


    <!-- Mensaje de "Espere..." oculto al principio -->
    <div id="loading-message" style="display: none; position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(0, 0, 0, 0.7); color: white; padding: 20px; border-radius: 10px; z-index: 9999;">
        <p>Espere, procesando descarga ...</p>
    </div>

    <!-- iframe invisible para manejar la descarga -->
    <iframe id="download-frame" style="display: none;"></iframe>
    <button id="download-csv" style="display: none;">Descargar CSV</button>
    <button id="download-excel" style="display: none;">Descargar CSV</button>


    <!-- Include necessary JS libraries locally -->
    <script src="{{ url_for('static', filename='vendor/js/jquery-3.6.0.min.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/js/jquery.dataTables.min.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/js/xlsx.full.min.js') }}"></script>



<!--
    <label for="toggle"><h3>Click para Explicación de columnas</h3></label>
    <input type="checkbox" id="toggle">
    <div id="expandableDiv">
        <h2>Alarmas en el Outage Manager</h2>
        <p><strong>Alarm Id:</strong>  Id del Outage (o Alarma), interno del Outage Manager (OUM).<br>
        <strong>Other Id:</strong>  Id de la ticketera o de Fault.<br>            
        <strong>Alarm State:</strong> Estado actual de la alarma (en outage y cadena).<br>
        <strong>Alarm Raised Time:</strong> Fecha y hora que Fault detecto 1er evento de la alarma.<br>
        <strong>Alarm Cleared Time:</strong> Fecha y hora que Fault desafecto la alarma, muestra los últimos {{ days_configMap }} días.<br>       
        <strong>Alarm Type:</strong> Tipo de alarma (INDISPONIBILIDAD, DEGRADACION y TAREA_PROGRAM...).<br>
        <strong>Inicio Outage:</strong> Fecha y hora que llego la afectacion al Outage Manager.<br>       
        <strong>Type Network Element:</strong> Tipo de elemento de red asociado (RFS: Resource Facing Service, conjunto de recursos asociados a un nombre, para facilitar su modelado/gestion).<br>
        <strong>Network Element ID:</strong> Nombre del elemento de red donde aplico el outage. <br>
        <strong>Clients:</strong> Cantidad de clientes afectados (clientes únicos). <br>
        <strong>Time Resolution:</strong> Tiempo estimado de resolución (s/tablas).</p>
    </div>
-->

</body>
</html>



